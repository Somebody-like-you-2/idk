<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Socket.IO Chat</title>
  <style>
    #chat { border: 1px solid #ccc; padding: 10px; max-width: 400px; height: 300px; overflow-y: auto; }
    .message { margin: 5px 0; }
  </style>
</head>
<body>

<h2>Chat Messages</h2>
<div id="chat"></div>

<script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
<script>
const socket = io("http://localhost:3000", {
  auth: {
    token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsImVtYWlsIjoiVGVzdDJAdGVzdC5jb20iLCJpYXQiOjE3NTkyMjQzODYsImV4cCI6MTc2MTgxNjM4Nn0.lmi-W6cDY8-slG0CJoFPU68vSV7o-2RptQfFEni9Zi4"
  }
});
  const chatDiv = document.getElementById('chat');

  // Listen for incoming chat messages
  socket.on('chat', (data, ack) => {
    console.log(data)
    const msgEl = document.createElement('div');
    msgEl.classList.add('message');
    msgEl.textContent = data.text; // Display the message text
    chatDiv.appendChild(msgEl);

    // Scroll to the bottom
    chatDiv.scrollTop = chatDiv.scrollHeight;

    // Send acknowledgment back to server if provided
    if (ack) ack('received');
  });

  // Optional: send a test message to server
  // socket.emit('chat:message', { text: 'Hello from client!' });
</script>

</body>
</html>
